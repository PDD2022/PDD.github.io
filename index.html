<!DOCTYPE html>
<html lang="ru" >
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
  <title>PDD</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <link rel="stylesheet" href="./pdd2/themes/gray/style.css">
<script src="https://cdn.jsdelivr.net/npm/@vkontakte/vk-bridge@2.0.8/dist/index.umd.js"></script>
<script>
const bridge = vkBridge.default;
bridge.subscribe((e) => console.log("vkBridge event", e));
bridge.send("VKWebAppInit", {});

</script>
<script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
<script>
  vkBridge.send('VKWebAppInit');
  /**
   * Requests a value from the storage
   *
   * @category Storage
   * @event VKWebAppStorageGet
   * @platform iOS, Android, Web
   *
   * @param key Keys for getting ([a-zA-Z_\-0-9])
   * @returns The stored value or empty string if the value is not found
   */
  public storageGet = async (key: string): Promise<string> => {
    const data = await this.bridge.send('VKWebAppStorageGet', { keys: [key] });

    if (!data || !Array.isArray(data.keys) || data.keys.length === 0) {
      return '';
    }

    return data.keys[0].value;
  };

  /**
   * Requests multiple values from the storage
   *
   * @category Storage
   * @event VKWebAppStorageGet
   * @platform iOS, Android, Web
   *
   * @param keys List of keys for getting ([a-zA-Z_\-0-9])
   *
   * @returns Map of key-value
   */
  public storageGetMultiple = async (keys: string[]): Promise<Record<string, string>> => {
    const data = await this.bridge.send('VKWebAppStorageGet', { keys });

    return data && Array.isArray(data.keys) && data.keys.length > 0
      ? data.keys.reduce((acc, item) => ({ ...acc, [item.key]: item.value }), {} as Record<string, string>)
      : {};
  };

  /**
   * Request list of keys of some stored values
   *
   * @category Storage
   * @event VKWebAppStorageGetKeys
   * @platform iOS, Android, Web
   *
   * @param count Count of keys to get. Max value is 1000
   * @param [offset] The offset required to fetch a specific subset of keys.
   * Default: 0
   */
  public storageGetKeys = async (count: number, offset: number = 0): Promise<string[]> => {
    const data = await this.bridge.send('VKWebAppStorageGetKeys', { count, offset });

    return (data && data.keys) || [];
  };

  /**
   * Stores value in storage
   *
   * @category Storage
   * @event VKWebAppStorageSet
   * @platform iOS, Android, Web
   *
   * @param key The key of value ([a-zA-Z_\-0-9])
   * @param value Value
   */
  public storageSet = async (key: string, value: string) => {
    await this.bridge.send('VKWebAppStorageSet', { key, value });
  };

</script>
</head>
<body>
<div class="dark-light">
    <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" width="24" height="24">
     <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" /></svg>
   </div>
<div class="app">
 <div class="wrapper">
  <div class="main-container">
   <div class="content-wrapper">
     <div id="pdd-test"></div><div id="pdd-statistics"></div>
   </div>
  </div>
 </div>
</div>
<!-- partial -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script><script  src="./pdd2/script.js"></script>
<!-- PDD-TEST START -->
<script src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.1.16/require.js" data-main="./pdd2/pdd-test.min.js" id="pdd-test-script"></script>

</body>
</html>
